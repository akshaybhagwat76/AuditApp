<section class="wrapper">
  <div class="container">
    <div>
      <h3>Create User</h3>
    </div>

    <!-- User Form Binding -->
    <form [formGroup]="requestForm" class="mt-3 formSet">

      <!-- User Name-->
      <div>
        <label for="user_name">User Name</label>
        <input class="form-control" formControlName="user_name" placeholder="User Name" [ngClass]="{
            'error-bord':
              requestForm.get('user_name')?.hasError('required') &&
              requestForm.get('user_name')?.touched
          }" />

        <!-- User Name Validation -->
        <div *ngIf="
            requestForm.get('user_name')?.invalid &&
            requestForm.get('user_name')?.touched
          ">
          <span *ngIf="requestForm.get('user_name')?.hasError('required')" class="text-danger form-error">
            User Name is Required
          </span>
        </div>
      </div>

      <!-- User Position-->
      <div>
        <label for="user_name">Position</label>
        <input class="form-control" formControlName="position_emp" placeholder="Position" [ngClass]="{
            'error-bord':
              requestForm.get('position_emp')?.hasError('required') &&
              requestForm.get('position_emp')?.touched
          }" />

        <!-- Position Validation -->
        <div *ngIf="
            requestForm.get('position_emp')?.invalid &&
            requestForm.get('position_emp')?.touched
          ">
          <span *ngIf="requestForm.get('position_emp')?.hasError('required')" class="text-danger form-error">
            Position is Required
          </span>
        </div>
      </div>

      <!-- User Phone-->
      <div>
        <label for="user_name">Phone</label>
        <input class="form-control" formControlName="phone" placeholder="Phone" [ngClass]="{
            'error-bord':
              requestForm.get('phone')?.hasError('required') &&
              requestForm.get('phone')?.touched
          }" />

        <!-- Phone Validation -->
        <div *ngIf="
            requestForm.get('phone')?.invalid &&
            requestForm.get('phone')?.touched
          ">
          <span *ngIf="requestForm.get('phone')?.hasError('required')" class="text-danger form-error">
            Phone no. is Required
          </span>
        </div>
      </div>

      <!-- User First Name-->
      <div>
        <label for="user_name">First Name</label>
        <input class="form-control" formControlName="first_name" placeholder="First Name" [ngClass]="{
            'error-bord':
              requestForm.get('first_name')?.hasError('required') &&
              requestForm.get('first_name')?.touched
          }" />

        <!-- First Name Validation -->
        <div *ngIf="
            requestForm.get('first_name')?.invalid &&
            requestForm.get('first_name')?.touched
          ">
          <span *ngIf="requestForm.get('first_name')?.hasError('required')" class="text-danger form-error">
            First Name is Required
          </span>
        </div>
      </div>

      <!-- User Last Name-->
      <div>
        <label for="user_name">Last Name</label>
        <input class="form-control" formControlName="last_name" placeholder="Last Name" [ngClass]="{
            'error-bord':
              requestForm.get('last_name')?.hasError('required') &&
              requestForm.get('last_name')?.touched
          }" />

        <!-- Last Name Validation -->
        <div *ngIf="
            requestForm.get('last_name')?.invalid &&
            requestForm.get('last_name')?.touched
          ">
          <span *ngIf="requestForm.get('last_name')?.hasError('required')" class="text-danger form-error">
            Last Name is Required
          </span>
        </div>
      </div>

      <!-- User Company-->
      <div>
        <label for="user_name">Company </label>
        <input class="form-control" formControlName="company" placeholder="Company" [ngClass]="{
            'error-bord':
              requestForm.get('company')?.hasError('required') &&
              requestForm.get('company')?.touched
          }" />

        <!-- Comnpany Validation -->
        <div *ngIf="
            requestForm.get('company')?.invalid &&
            requestForm.get('company')?.touched
          ">
          <span *ngIf="requestForm.get('company')?.hasError('required')" class="text-danger form-error">
            Company Name is Required
          </span>
        </div>
      </div>
      <div>

        <!-- For User Save button -->
        <button class="btn btn-primary" [disabled]="requestForm.status == 'INVALID'" (click)="createUser()">
          Save
        </button>
      </div>
    </form>
  </div>
  <div class="container mt-5">
    <div>
      <h1>List of users</h1>
    </div>

    <!-- User Listing -->
    <table class="table table-bordered">
      <thead>
        <tr>
          <th scope="col">id</th>
          <th scope="col">Role</th>
          <th scope="col">User Name</th>
          <th scope="col">Position</th>
          <th scope="col">Phone</th>
          <th scope="col">First Name</th>
          <th scope="col">Last Name</th>
          <th scope="col">Company</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let item of users?.user">
          <th scope="row">{{ item.id }}</th>
          <td>{{ item.roles.toString() }}</td>
          <td>{{ item.user_name }}</td>
          <td>{{ item.position_emp }}</td>
          <td>{{ item.phone }}</td>
          <td>{{ item.first_name }}</td>
          <td>{{ item.last_name }}</td>
          <td>{{ item.company }}</td>
        </tr>
      </tbody>
    </table>
  </div>
</section>
